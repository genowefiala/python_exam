mport os, sys

def db_toggler():
        target = str(sys.argv[2])
        directory = str(sys.argv[1])

        try:
                if target == "testing":
                        print"Target 'testing' is valid"
                elif target == "production":
                        print"Target 'production' is valid"
                else:
                        print"Target is not valid"

                print"Checking existence of directory...",
                os.path.isdir(directory)
                print" done."

                print"Checking existence of target file...",
                os.path.exists(directory + "/" + target + ".sqlite")
                print" done."

                print"Checking existence of symlink...",
                os.path.islink(directory+"/"+target+".sqlite")
                print" done."

                if os.path.islink(directory + "/" + "db.sqlite"):
                        print"Removing symlink...",
                        os.unlink(directory + "/" + "db.sqlite")
                        print" done."
                else:
                        print"There are no symlinks"

                print"Symlinking " + target + ".sqlite as db.sqlite...", 
                os.symlink(directory + "/" + target + "/" + ".sqlite", directory + "/" +  "db.sqlite")
                print" done."

                print"Validating end result..."
                print" done."

        except: 
                print("Problem!")
                sys.exit(2)

db_toggler()

                
